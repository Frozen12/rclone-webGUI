/* Base Styles */
body, :root.theme-dark, :root.dark-mode, :root.theme-blue, :root.theme-purple, :root.theme-orange, :root.theme-red, :root.theme-teal, :root.theme-indigo {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.3s, color 0.3s;
}

/* --- Theme Color Variables --- */
:root {
    /* Default: Green Dark Mode */
    --primary-color: #DCE7DC; --accent-color: #558B55; --bg-color: #1A2A1A; --card-bg-color: #2D402D; --text-color: #DCE7DC; --border-color: #4A6B4A; --input-bg-color: #3C503C; --button-bg-color: #6AA66A; --button-text-color: #1A2A1A; --success-color: #4CAF50; --error-color: #E53935; --warning-color: #FFB300; --info-color: #2196F3;
    --card-bg-color-rgb: 45, 64, 45; --accent-color-rgb: 85, 139, 85; --primary-color-rgb: 220, 231, 220; --button-bg-color-rgb: 106, 166, 106;
}
:root.dark-mode { /* Alias for default */
    --primary-color: #DCE7DC; --accent-color: #558B55; --bg-color: #1A2A1A; --card-bg-color: #2D402D; --text-color: #DCE7DC; --border-color: #4A6B4A; --input-bg-color: #3C503C; --button-bg-color: #6AA66A; --button-text-color: #1A2A1A;
    --card-bg-color-rgb: 45, 64, 45; --accent-color-rgb: 85, 139, 85; --primary-color-rgb: 220, 231, 220; --button-bg-color-rgb: 106, 166, 106;
}
:root.theme-dark { /* New Black Theme */
    --primary-color: #E0E0E0; --accent-color: #BB86FC; --bg-color: #121212; --card-bg-color: #1E1E1E; --text-color: #E0E0E0; --border-color: #333333; --input-bg-color: #2C2C2C; --button-bg-color: #BB86FC; --button-text-color: #121212;
    --card-bg-color-rgb: 30, 30, 30; --accent-color-rgb: 187, 134, 252; --primary-color-rgb: 224, 224, 224; --button-bg-color-rgb: 187, 134, 252;
}
:root.theme-blue {
    --primary-color: #DDEBF0; --accent-color: #3F8FBD; --bg-color: #1A2C3D; --card-bg-color: #2D4258; --text-color: #DDEBF0; --border-color: #4A6A8C; --input-bg-color: #3C526A; --button-bg-color: #559AC7; --button-text-color: #1A2C3D;
    --card-bg-color-rgb: 45, 66, 88; --accent-color-rgb: 63, 143, 189; --primary-color-rgb: 221, 235, 240; --button-bg-color-rgb: 85, 154, 199;
}
:root.theme-purple {
    --primary-color: #E8E0EC; --accent-color: #7A50A0; --bg-color: #2E1A3D; --card-bg-color: #3F2C58; --text-color: #E8E0EC; --border-color: #5A4A7A; --input-bg-color: #4D3C6A; --button-bg-color: #9A7AA6; --button-text-color: #2E1A3D;
    --card-bg-color-rgb: 63, 44, 88; --accent-color-rgb: 122, 80, 160; --primary-color-rgb: 232, 224, 236; --button-bg-color-rgb: 154, 122, 166;
}
:root.theme-orange {
    --primary-color: #F5E9DD; --accent-color: #D07B2D; --bg-color: #3D2C1A; --card-bg-color: #58422D; --text-color: #F5E9DD; --border-color: #8C6A4A; --input-bg-color: #6A523C; --button-bg-color: #F0A055; --button-text-color: #3D2C1A;
    --card-bg-color-rgb: 88, 66, 45; --accent-color-rgb: 208, 123, 45; --primary-color-rgb: 245, 233, 221; --button-bg-color-rgb: 240, 160, 85;
}
:root.theme-red {
    --primary-color: #F0E3E3; --accent-color: #B04F4F; --bg-color: #3D1A1A; --card-bg-color: #582D2D; --text-color: #F0E3E3; --border-color: #8C4A4A; --input-bg-color: #6A3C3C; --button-bg-color: #E06A6A; --button-text-color: #3D1A1A;
    --card-bg-color-rgb: 88, 45, 45; --accent-color-rgb: 176, 79, 79; --primary-color-rgb: 240, 227, 227; --button-bg-color-rgb: 224, 106, 106;
}
:root.theme-teal {
    --primary-color: #E0EFEF; --accent-color: #3F9B9B; --bg-color: #1A3D3D; --card-bg-color: #2D5858; --text-color: #E0EFEF; --border-color: #4A8C8C; --input-bg-color: #3C6A6A; --button-bg-color: #55C7C7; --button-text-color: #1A3D3D;
    --card-bg-color-rgb: 45, 88, 88; --accent-color-rgb: 63, 155, 155; --primary-color-rgb: 224, 239, 239; --button-bg-color-rgb: 85, 199, 199;
}
:root.theme-indigo {
    --primary-color: #E3E5F0; --accent-color: #4A5CB0; --bg-color: #1A2D3D; --card-bg-color: #2D4258; --text-color: #E3E5F0; --border-color: #4A6A8C; --input-bg-color: #3C506A; --button-bg-color: #6A7BC0; --button-text-color: #1A2D3D;
    --card-bg-color-rgb: 45, 66, 88; --accent-color-rgb: 74, 92, 176; --primary-color-rgb: 227, 229, 240; --button-bg-color-rgb: 106, 123, 192;
}

/* App Title */
.app-title {
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    background: linear-gradient(90deg, var(--accent-color), var(--primary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* Card & Input Fields */
.card { background-color: var(--card-bg-color); border: 1px solid var(--border-color); }
.input-label { display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--primary-color); }
.input-field, select.custom-select {
    background-color: var(--input-bg-color); border: 1px solid var(--border-color); color: var(--text-color); transition: all 0.2s;
}
.input-field:focus, select.custom-select:focus {
    border-color: var(--accent-color); box-shadow: 0 0 0 3px rgba(var(--accent-color-rgb), 0.4); outline: none;
}

/* Buttons */
.btn-primary, .btn-secondary, .btn-danger {
    padding: 0.75rem 1.5rem; border-radius: 0.75rem; font-weight: 600; transition: all 0.15s;
    display: inline-flex; justify-content: center; align-items: center; text-align: center; cursor: pointer; border: none;
}
.btn-primary { background-color: var(--button-bg-color); color: var(--button-text-color); }
.btn-primary:hover { filter: brightness(1.1); transform: translateY(-1px); }
.btn-secondary { background-color: var(--input-bg-color); color: var(--primary-color); border: 1px solid var(--border-color); }
.btn-secondary:hover { background-color: var(--border-color); transform: translateY(-1px); }
.btn-danger { background-color: var(--error-color); color: white; }
.btn-danger:hover { filter: brightness(1.1); transform: translateY(-1px); }

/* Navigation */
.nav-button {
    width: 100%; text-align: left; padding: 1rem 1.5rem; border-radius: 0.75rem; background-color: transparent;
    color: var(--text-color); font-weight: 600; transition: all 0.2s; display: flex; align-items: center;
}
.nav-button:hover { background-color: var(--input-bg-color); color: var(--accent-color); transform: translateX(2px); }
.nav-button.active { background-color: var(--accent-color); color: var(--button-text-color); box-shadow: inset 0 1px 3px rgba(0,0,0,0.2); }

/* Output Areas & Logging */
.output-area {
    background-color: var(--input-bg-color); border: 1px solid var(--border-color); border-radius: 0.75rem; padding: 1rem;
    white-space: pre-wrap; word-break: break-all; overflow-y: auto; font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 0.875rem; color: var(--primary-color); max-height: 500px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}
.major-steps-output {
    background-color: var(--input-bg-color); border: 1px solid var(--border-color); border-radius: 0.75rem;
    padding: 1rem; font-weight: 500; min-height: 50px; overflow-y: auto; max-height: 150px;
}
.major-steps-output .success { color: var(--success-color); }
.major-steps-output .error { color: var(--error-color); }
.major-steps-output .warning { color: var(--warning-color); }
.major-steps-output .info { color: var(--info-color); }

/* Sliders & Checkboxes */
.slider {
    -webkit-appearance: none; width: 100%; height: 8px; background: var(--input-bg-color); outline: none;
    border-radius: 4px; border: 1px solid var(--border-color);
}
.slider::-webkit-slider-thumb {
    -webkit-appearance: none; appearance: none; width: 20px; height: 20px; border-radius: 50%;
    background: var(--accent-color); cursor: grab; box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
.checkbox-container { display: flex; align-items: center; cursor: pointer; }
.checkbox-container input[type="checkbox"] {
    appearance: none; width: 20px; height: 20px; border: 2px solid var(--accent-color); border-radius: 0.375rem;
    background-color: var(--input-bg-color); cursor: pointer; position: relative; transition: all 0.2s;
}
.checkbox-container input[type="checkbox"]:checked { background-color: var(--accent-color); border-color: var(--accent-color); }
.checkbox-container input[type="checkbox"]:checked::after {
    content: '\2713'; color: var(--button-text-color); font-size: 14px; position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
}

/* Spinners, Modals, File Uploads */
.spinner-overlay {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(var(--card-bg-color-rgb), 0.95);
    display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 0.75rem; z-index: 10;
}
.spinner { border: 4px solid var(--border-color); border-top: 4px solid var(--accent-color); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.75); display: flex; justify-content: center; align-items: center; z-index: 1000; }
.custom-file-upload { display: flex; align-items: center; border: 1px solid var(--border-color); border-radius: 0.75rem; background-color: var(--input-bg-color); padding: 0.5rem; cursor: pointer; }
.file-name-display { flex-grow: 1; padding: 0.5rem 0.75rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 0.9rem; }
.file-button { flex-shrink: 0; }
.theme-link { display: block; padding: 0.5rem 1rem; margin: 0.25rem; border-radius: 0.5rem; color: var(--text-color); }
.theme-link:hover { background-color: var(--input-bg-color); }

/* Custom Select */
select.custom-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23DCE7DC'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
    background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1.25rem; padding-right: 2.5rem;
}
select.custom-select option { background-color: var(--card-bg-color); color: var(--text-color); }

/* Animated Background Shapes */
.background-shapes { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; background: linear-gradient(135deg, var(--bg-color), var(--card-bg-color)); }
.shape-1, .shape-2, .shape-3 { position: absolute; border-radius: 50%; filter: blur(60px); }
.shape-1 { top: -10%; left: -10%; width: 40%; height: 40%; background: rgba(var(--accent-color-rgb), 0.1); animation: float1 15s infinite ease-in-out alternate; }
.shape-2 { bottom: -15%; right: -15%; width: 50%; height: 50%; background: rgba(var(--primary-color-rgb), 0.08); animation: float2 20s infinite ease-in-out alternate; }
.shape-3 { top: 20%; right: 5%; width: 25%; height: 25%; background: rgba(var(--button-bg-color-rgb), 0.15); animation: float3 18s infinite ease-in-out alternate; }
@keyframes float1 { to { transform: translate(20px, 30px) rotate(5deg); } }
@keyframes float2 { to { transform: translate(-30px, -20px) rotate(-8deg); } }
@keyframes float3 { to { transform: translate(10px, -15px) rotate(10deg); } }
